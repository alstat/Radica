{
    "collab_server" : "",
    "contents" : "# D A T A\n\nlibrary(magrittr)\nsetwd(\"~/OneDrive/Socioeconomics/R Files/\")\nrawdat <- read.csv('HHLD_SUMMARY_2.CSV', header = TRUE)\nrawdat %>% names\n\n# Estimate of Private Cost of Health Care\n\ntab_priv_health <- xtabs(TDENTALPRIV + TINPATIENTPRIV ~ W_REGN + POOR, data = rawdat)\nrownames(tab_priv_health) <- paste('REGN', c(1:3, 5:12, 'NCR', 'CAR', 'ARMM', 'CARAGA', '4-A', '4-B'))\ncolnames(tab_priv_health) <- c('POOR', 'NON-POOR')\nwrite.table(tab_priv_health, file = 'tab_priv_health.csv', sep = ',')\n\n# Estimate of access to Public Health Care\nrawdat$TDENTALPUB_IND <- ifelse(rawdat$TDENTALPUB > 0, 1, 0)\nrawdat$TINPATIENTPUB_IND <- ifelse(rawdat$TINPATIENTPUB > 0, 1, 0)\n\nACCESS_PUBHEALTH <- numeric()\nfor (i in 1:nrow(rawdat)) {\n  if (rawdat$TDENTALPUB_IND[i] == 1 && rawdat$TINPATIENTPUB_IND[i] == 0) {\n    ACCESS_PUBHEALTH[i] <- 1\n  } else if (rawdat$TDENTALPUB_IND[i] == 0 && rawdat$TINPATIENTPUB_IND[i] == 1) {\n    ACCESS_PUBHEALTH[i] <- 1\n  } else if (rawdat$TDENTALPUB_IND[i] == 1 && rawdat$TINPATIENTPUB_IND[i] == 1) {\n    ACCESS_PUBHEALTH[i] <- 1\n  } else if (rawdat$TDENTALPUB_IND[i] == 0 && rawdat$TINPATIENTPUB_IND[i] == 0) {\n    ACCESS_PUBHEALTH[i] <- 0\n  }\n}\nrawdat$ACCESS_PUBHEALTH <- ACCESS_PUBHEALTH\ntab_access_health <- xtabs(ACCESS_PUBHEALTH ~ W_REGN + POOR, data = rawdat)\nrownames(tab_access_health) <- paste('REGN', c(1:3, 5:12, 'NCR', 'CAR', 'ARMM', 'CARAGA', '4-A', '4-B'))\ncolnames(tab_access_health) <- c('POOR', 'NON-POOR')\nwrite.table(tab_access_health, file = 'tab_access_health.csv', sep = ',')\n\n# Estimate of access to Early warning\n\nrawdat$TCELPHONE_IND <- ifelse(rawdat$TCELPHONE > 0, 1, 0)\nrawdat$TINTERNET_IND <- ifelse(rawdat$TINTERNET > 0, 1, 0)\nrawdat$TLANDLINE_IND <- ifelse(rawdat$TLANDLINE > 0, 1, 0)\n\nACCESS_EARLYWARNING <- numeric()\nfor (i in 1:nrow(rawdat)) {\n  if (rawdat$TCELPHONE_IND[i] == 1 && rawdat$TINTERNET_IND[i] == 0 && rawdat$TLANDLINE_IND[i] == 0) {\n    ACCESS_EARLYWARNING[i] <- 1\n  } else if (rawdat$TCELPHONE_IND[i] == 0 && rawdat$TINTERNET_IND[i] == 1 && rawdat$TLANDLINE_IND[i] == 0) {\n    ACCESS_EARLYWARNING[i] <- 1\n  } else if (rawdat$TCELPHONE_IND[i] == 0 && rawdat$TINTERNET_IND[i] == 0 && rawdat$TLANDLINE_IND[i] == 1) {\n    ACCESS_EARLYWARNING[i] <- 1\n  } else if (rawdat$TCELPHONE_IND[i] == 1 && rawdat$TINTERNET_IND[i] == 1 && rawdat$TLANDLINE_IND[i] == 0) {\n    ACCESS_EARLYWARNING[i] <- 1\n  } else if (rawdat$TCELPHONE_IND[i] == 1 && rawdat$TINTERNET_IND[i] == 0 && rawdat$TLANDLINE_IND[i] == 1) {\n    ACCESS_EARLYWARNING[i] <- 1\n  } else if (rawdat$TCELPHONE_IND[i] == 0 && rawdat$TINTERNET_IND[i] == 1 && rawdat$TLANDLINE_IND[i] == 1) {\n    ACCESS_EARLYWARNING[i] <- 1\n  } else if (rawdat$TCELPHONE_IND[i] == 1 && rawdat$TINTERNET_IND[i] == 1 && rawdat$TLANDLINE_IND[i] == 1) {\n    ACCESS_EARLYWARNING[i] <- 1\n  } else {\n    ACCESS_EARLYWARNING[i] <- 0\n  }\n}\n\nrawdat$ACCESS_EARLYWARNING <- ACCESS_EARLYWARNING\ntab_access_warn <- xtabs(ACCESS_EARLYWARNING ~ W_REGN + POOR, data = rawdat)\nrownames(tab_access_warn) <- paste('REGN', c(1:3, 5:12, 'NCR', 'CAR', 'ARMM', 'CARAGA', '4-A', '4-B'))\ncolnames(tab_access_warn) <- c('POOR', 'NON-POOR')\nwrite.table(tab_access_warn, file = 'tab_access_warn.csv', sep = ',')\n\n## New data for Transfers, Social Protection, and Average income\n#####################\n\nrawdat_2 <- read.csv('Income_Share.CSV', header = TRUE)\ntab_transfers <- xtabs(CASH_ABROAD + CASH_DOMESTIC ~ W_REGN + POOR, data = rawdat_2)\ntab_income <- xtabs(TOINC ~ W_REGN + POOR, data = rawdat_2)\n\n# Share of household income from transfers (in pecentage)\ntab_share_hincome_transfers <- tab_transfers / tab_income * 100\ntab_share_hincome_transfers\nrownames(tab_share_hincome_transfers) <- paste('REGN', c(1:3, 5:12, 'NCR', 'CAR', 'ARMM', 'CARAGA', '4-A', '4-B'))\ncolnames(tab_share_hincome_transfers) <- c('POOR', 'NON-POOR')\nwrite.table(tab_share_hincome_transfers, file = 'tab_share_hincome_transfers.csv', sep = ',')\n\n# share of household income coming from social protection (underestimated)\ntab_socprotect <- xtabs(PENSION ~ W_REGN + POOR, data = rawdat_2)\ntab_share_hincome_socprotect <- tab_socprotect / tab_income * 100\nrownames(tab_share_hincome_socprotect) <- paste('REGN', c(1:3, 5:12, 'NCR', 'CAR', 'ARMM', 'CARAGA', '4-A', '4-B'))\ncolnames(tab_share_hincome_socprotect) <- c('POOR', 'NON-POOR')\nwrite.table(tab_share_hincome_socprotect, file = 'tab_share_hincome_socprotect.csv', sep = ',')\n\n# average income of poor people (annually)\ntab_no_resp <- xtabs( ~ W_REGN + POOR, data = rawdat_2)\ntab_ave_income <- tab_income / tab_no_resp\nrownames(tab_ave_income) <- paste('REGN', c(1:3, 5:12, 'NCR', 'CAR', 'ARMM', 'CARAGA', '4-A', '4-B'))\ncolnames(tab_ave_income) <- c('POOR', 'NON-POOR')\nwrite.table(tab_ave_income, file = 'tab_ave_income.csv', sep = ',')\n\n\n\n\n# financial savings\nrawdat_2$SAVINGS <- rawdat_2$TOINC - rawdat_2$TTOTEX\ntab_no_fam <- xtabs(~ W_REGN + W_REGN, data = rawdat_2)\nxtabs(TOINC ~ W_REGN + TOINC, data = rawdat_2) / tab_no_fam\n\n\ntab_no_resp_sum <- tab_no_resp %>% rowSums\nincome <- (xtabs(TOINC ~ W_REGN, data = rawdat_2) / tab_no_resp_sum) %>% as.data.frame\nrownames(income) <- paste('REGN', c(1:3, 5:12, 'NCR', 'CAR', 'ARMM', 'CARAGA', '4-A', '4-B'))\n\nexpenses <- (xtabs(TTOTEX ~ W_REGN, data = rawdat_2) / tab_no_resp_sum) %>% as.data.frame\nrownames(expenses) <- paste('REGN', c(1:3, 5:12, 'NCR', 'CAR', 'ARMM', 'CARAGA', '4-A', '4-B'))\nsavings <- income - expenses\nexpenses\n\n\n### Financial savings poor and non-poor\ntab_expenses <- xtabs(TTOTEX ~ W_REGN + POOR, data = rawdat_2)\ntab_ave_expenses <- tab_expenses / tab_no_resp\n\n# (verification)\ntab_expenses %>% rowSums %>% as.data.frame / tab_no_resp_sum\n\ntab_savings <- tab_income - tab_expenses\ntab_ave_savings <- tab_savings / tab_no_resp\nrownames(tab_expenses) <- paste('REGN', c(1:3, 5:12, 'NCR', 'CAR', 'ARMM', 'CARAGA', '4-A', '4-B'))\nrownames(tab_ave_savings) <- paste('REGN', c(1:3, 5:12, 'NCR', 'CAR', 'ARMM', 'CARAGA', '4-A', '4-B'))\n\ntab_ave_savings\n\nsavings\n# VERIFICATION\n#colSums(rawdat[rawdat$W_REGN == 1 & rawdat$POOR == 1,], na.rm = TRUE)\ncolSums(rawdat[rawdat$W_REGN == 1 & rawdat$POOR == 2,], na.rm = TRUE)\nrawdat[rawdat$TDENTALPUB_IND == 1 & rawdat$TINPATIENTPUB_IND == 1, 34:36]\n\n",
    "created" : 1457071008978.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "1332721448",
    "id" : "ED4021C8",
    "lastKnownWriteTime" : 1457170661,
    "last_content_update" : 0,
    "path" : "~/OneDrive/Socioeconomics/R Files/Socioeconomic.R",
    "project_path" : null,
    "properties" : {
    },
    "relative_order" : 7,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}